<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contas do Benfica ‚Äì Champions | Jornada 8</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body{
      font-family: 'Inter', system-ui, sans-serif;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
      color:#eee;
      padding: 20px;
      min-height: 100vh;
    }

    .container{ max-width: 1200px; margin: 0 auto; }

    h1{
      font-size: 30px;
      font-weight: 800;
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 18px;
      text-align: center;
      letter-spacing: -0.5px;
    }

    .card{
      background: linear-gradient(135deg, rgba(30,30,46,0.95) 0%, rgba(22,22,36,0.95) 100%);
      backdrop-filter: blur(10px);
      padding: 18px;
      border-radius: 16px;
      margin-bottom: 16px;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }

    .small{ font-size: 13px; color: #a6a6b3; margin-top: 8px; }

    /* Bot√µes */
    .btn{
      background: linear-gradient(135deg, #f44336 0%, #e53935 100%);
      color:#fff;
      border:none;
      padding:12px 18px;
      border-radius:10px;
      font-size:14px;
      font-weight:800;
      cursor:pointer;
      box-shadow: 0 4px 16px rgba(244,67,54,0.35);
      line-height: 1;
    }

    .btn.secondary{
      background: rgba(255,255,255,0.08);
      box-shadow:none;
      border: 1px solid rgba(255,255,255,0.14);
    }

    /* Bot√µes pequenos (pedido) */
    .btn.sm{
      padding: 9px 12px;
      border-radius: 9px;
      font-size: 12px;
      font-weight: 900;
      box-shadow: none;
    }

    /* Toolbar: bot√µes ao lado de "Limpar resultados" */
    .toolbar{
      display:flex;
      align-items:center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .toolbar .btn{ white-space: nowrap; }

    @media (max-width: 520px){
      .toolbar .btn{ flex: 1; }
    }

    /* Tabelas */
    .table-wrap{ overflow-x:auto; }
    table{ width:100%; border-collapse:collapse; font-size:14px; }
    th, td{ padding:10px 10px; border-bottom:1px solid rgba(255,255,255,0.06); text-align:left; }
    th{
      background: rgba(0,0,0,0.3);
      font-weight:700;
      text-transform:uppercase;
      font-size:11px;
      letter-spacing:0.6px;
      color:#b2b2b2;
      position: sticky;
      top: 0;
      z-index: 2;
    }

    .pos{ width:44px; text-align:center; color:#b2b2b2; font-weight:800; }
    .num{ text-align:center; width:64px; font-variant-numeric: tabular-nums; }
    .pts{ text-align:center; width:64px; font-weight:900; font-size:15px; }

    .zone-top8{ border-left:4px solid #2196f3; background: rgba(33,150,243,0.08); }
    .zone-playoff{ border-left:4px solid #4caf50; background: rgba(76,175,80,0.07); }
    .zone-out{ border-left:4px solid #777; background: rgba(255,255,255,0.03); opacity: 0.92; }
    .benfica{ border-left:4px solid #c62828 !important; background: rgba(198,40,40,0.12) !important; }

    .mov-up{ color:#4caf50; font-weight:900; }
    .mov-down{ color:#f44336; font-weight:900; }
    .mov-same{ color:#8c8c8c; }

    .details{
      border: 1px solid rgba(255,255,255,0.10);
      border-radius:14px;
      overflow:hidden;
      margin-top:12px;
    }

    details summary{
      cursor:pointer;
      list-style:none;
      padding:12px 14px;
      background: rgba(0,0,0,0.22);
      font-weight:900;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    details summary::-webkit-details-marker{ display:none; }

    .pill{
      font-size:12px;
      font-weight:900;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.14);
      color:#d7d7e0;
      background: rgba(255,255,255,0.06);
      white-space:nowrap;
    }
    .pill.blue{ border-color: rgba(33,150,243,0.45); background: rgba(33,150,243,0.10); }
    .pill.green{ border-color: rgba(76,175,80,0.45); background: rgba(76,175,80,0.10); }
    .pill.gray{ border-color: rgba(200,200,200,0.25); background: rgba(200,200,200,0.06); }

    /* Inputs */
    input[type="number"]{
      width: 64px;
      padding: 8px 10px;
      border-radius: 10px;
      border: 2px solid rgba(255,255,255,0.12);
      background: linear-gradient(135deg, #2a2a3e 0%, #1f1f2e 100%);
      color:#fff;
      font-size: 18px;
      font-weight: 900;
      text-align: center;
      transition: all .15s ease;
      font-variant-numeric: tabular-nums;
    }
    input[type="number"]:focus{
      outline:none;
      border-color: rgba(76,175,80,0.8);
      box-shadow: 0 0 0 3px rgba(76,175,80,0.18);
      transform: scale(1.03);
    }
    .sep{ color:#777; font-weight:900; font-size:18px; }

    .impact{ font-weight:900; }
    .impact .good{ color:#4caf50; }
    .impact .bad{ color:#f44336; }
    .impact .neutral{ color:#9a9aa6; }

    /* Chips */
    .chip{
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      font-variant-numeric: tabular-nums;
      white-space: nowrap;
      font-size: 12px;
      font-weight: 900;
      display:inline-block;
    }
    .chip.good{ border-color: rgba(76,175,80,0.35); background: rgba(76,175,80,0.10); color: #b8ffd0; }
    .chip.bad{ border-color: rgba(244,67,54,0.35); background: rgba(244,67,54,0.10); color: #ffd0cb; }

    /* Bolha flutuante */
    .floating-bubble{
      position: fixed;
      right: 16px;
      top: 16px;
      z-index: 9999;
      width: min(400px, calc(100vw - 32px));
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(20, 20, 34, 0.62);
      backdrop-filter: blur(14px);
      box-shadow: 0 18px 50px rgba(0,0,0,0.45);
      overflow: hidden;
    }

    .floating-bubble .head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.18);
    }

    .floating-bubble .status{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight: 900;
      letter-spacing: 0.2px;
    }

    .dot{
      width: 10px;
      height: 10px;
      border-radius: 999px;
    }
    .dot.inside{ background: #4caf50; box-shadow: 0 0 22px rgba(76,175,80,0.45); }
    .dot.outside{ background: #f44336; box-shadow: 0 0 22px rgba(244,67,54,0.45); }

    .floating-bubble .toggle{
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      color: #e9e9f0;
      font-weight: 900;
      border-radius: 12px;
      padding: 8px 10px;
      cursor: pointer;
      line-height: 1;
    }

    .floating-bubble .body{
      padding: 12px;
      display: grid;
      gap: 10px;
    }

    .benfica-box{
      border-radius: 14px;
      border: 1px solid rgba(198,40,40,0.35);
      background: rgba(198,40,40,0.12);
      padding: 10px 12px;
    }

    .benfica-box .title{
      font-weight: 900;
      margin-bottom: 8px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }

    .score-mini{
      display:flex;
      align-items:center;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 6px;
    }

    .benfica-meta{
      display:flex;
      flex-wrap:wrap;
      gap: 8px 10px;
      margin-top: 10px;
    }

    .floating-bubble.minimized .body{ display: none; }

    @media (max-width: 720px){
      .floating-bubble{ right: 10px; top: 10px; }
      h1{ font-size: 24px; }
      th, td{ padding: 9px 8px; }
    }
  </style>
</head>

<body>

  <!-- Bolha: resultado Benfica fica aqui -->
  <div id="floatingBubble" class="floating-bubble" aria-live="polite">
    <div class="head">
      <div class="status">
        <span class="dot outside" id="bubbleDot"></span>
        <span id="bubbleText">Fora</span>
      </div>
      <button class="toggle" id="bubbleToggle" title="Minimizar/Expandir">‚Äì</button>
    </div>

    <div class="body">
      <div class="benfica-box">
        <div class="title">
          <span>üî¥ Benfica vs Real Madrid</span>
          <span id="bubbleMatchBadge" class="chip bad">N√£o vence</span>
        </div>

        <div class="score-mini">
          <strong>BEN</strong>
          <input type="number" id="ben_rmd_home" value="0" min="0" max="9" />
          <span class="sep">‚Äì</span>
          <input type="number" id="ben_rmd_away" value="0" min="0" max="9" />
          <strong>RMA</strong>
        </div>

        <div class="small" id="benfica_status" style="margin-top:10px;"></div>

        <div class="benfica-meta" id="bubbleBenficaMeta">
          <span class="chip">Pos: ‚Äî</span>
          <span class="chip">Pts: ‚Äî</span>
          <span class="chip">SG: ‚Äî</span>
          <span class="chip">GM/GS: ‚Äî</span>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <h1>Contas do Benfica ‚Äì Champions League (Jornada 8)</h1>

    <div class="card">
      <div class="toolbar">
        <button class="btn sm" onclick="resetAll()">Limpar resultados</button>
        <button class="btn secondary sm" onclick="setAllZones(true)">Expandir tudo</button>
        <button class="btn secondary sm" onclick="setAllZones(false)">Colapsar tudo</button>
      </div>
      <div class="small">Base: tabela oficial ap√≥s a Jornada 7; simula√ß√£o altera Pts/GM/GS/SG e reordena. [page:1]</div>
    </div>

    <div class="card">
      <div style="font-weight: 900; font-size: 18px;">üìä Classifica√ß√£o (1‚Äì36)</div>
      <div class="small">Ordem: Pontos ‚Üí SG ‚Üí GM. [page:1]</div>

      <div class="details">
        <details id="zone_top8" open>
          <summary><span>üîµ Top 8 (Oitavos diretos)</span><span class="pill blue">1‚Äì8</span></summary>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th class="pos">#</th><th>Equipa</th>
                  <th class="num">J</th><th class="num">V</th><th class="num">E</th><th class="num">D</th>
                  <th class="num">GM</th><th class="num">GS</th><th class="num">SG</th>
                  <th class="pts">Pts</th><th class="num">Mov</th>
                </tr>
              </thead>
              <tbody id="tbody_top8"></tbody>
            </table>
          </div>
        </details>
      </div>

      <div class="details">
        <details id="zone_playoff" open>
          <summary><span>üü¢ 9‚Äì24 (Playoff)</span><span class="pill green">9‚Äì24</span></summary>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th class="pos">#</th><th>Equipa</th>
                  <th class="num">J</th><th class="num">V</th><th class="num">E</th><th class="num">D</th>
                  <th class="num">GM</th><th class="num">GS</th><th class="num">SG</th>
                  <th class="pts">Pts</th><th class="num">Mov</th>
                </tr>
              </thead>
              <tbody id="tbody_playoff"></tbody>
            </table>
          </div>
        </details>
      </div>

      <div class="details">
        <details id="zone_out" open>
          <summary><span>‚ö´ 25‚Äì36 (Eliminados)</span><span class="pill gray">25‚Äì36</span></summary>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th class="pos">#</th><th>Equipa</th>
                  <th class="num">J</th><th class="num">V</th><th class="num">E</th><th class="num">D</th>
                  <th class="num">GM</th><th class="num">GS</th><th class="num">SG</th>
                  <th class="pts">Pts</th><th class="num">Mov</th>
                </tr>
              </thead>
              <tbody id="tbody_out"></tbody>
            </table>
          </div>
        </details>
      </div>
    </div>

    <div class="card">
      <div style="font-weight: 900; font-size: 18px;">üìã Jogos relevantes (Jornada 8)</div>
      <div class="small">Favor√°vel/Mau/Neutro √© uma heur√≠stica simples. [page:1]</div>

      <div class="table-wrap" style="margin-top: 10px;">
        <table>
          <thead>
            <tr><th>Jogo</th><th style="text-align:center;">Resultado</th><th>Impacto</th></tr>
          </thead>
          <tbody id="games-body"></tbody>
        </table>
      </div>

      <div class="small" id="fav_count_info" style="margin-top: 10px;"></div>
      <div class="small" id="benfica_position_info"></div>
    </div>
  </div>

<script>
  // Base oficial ap√≥s Jornada 7 (UEFA) [page:1]
  const initialStandings = [
    { team:"Arsenal",        p:7,w:7,d:0,l:0,gf:20,ga:2,  pts:21, pos:1 },
    { team:"Bayern M√ºnchen", p:7,w:6,d:0,l:1,gf:20,ga:7,  pts:18, pos:2 },
    { team:"Real Madrid",    p:7,w:5,d:0,l:2,gf:19,ga:8,  pts:15, pos:3 },
    { team:"Liverpool",      p:7,w:5,d:0,l:2,gf:14,ga:8,  pts:15, pos:4 },
    { team:"Tottenham",      p:7,w:4,d:2,l:1,gf:15,ga:7,  pts:14, pos:5 },
    { team:"Paris",          p:7,w:4,d:1,l:2,gf:20,ga:10, pts:13, pos:6 },
    { team:"Newcastle",      p:7,w:4,d:1,l:2,gf:16,ga:6,  pts:13, pos:7 },
    { team:"Chelsea",        p:7,w:4,d:1,l:2,gf:14,ga:8,  pts:13, pos:8 },
    { team:"Barcelona",      p:7,w:4,d:1,l:2,gf:18,ga:13, pts:13, pos:9 },
    { team:"Sporting CP",    p:7,w:4,d:1,l:2,gf:14,ga:9,  pts:13, pos:10 },
    { team:"Man City",       p:7,w:4,d:1,l:2,gf:13,ga:9,  pts:13, pos:11 },
    { team:"Atleti",         p:7,w:4,d:1,l:2,gf:16,ga:13, pts:13, pos:12 },
    { team:"Atalanta",       p:7,w:4,d:1,l:2,gf:10,ga:9,  pts:13, pos:13 },
    { team:"Inter",          p:7,w:4,d:0,l:3,gf:13,ga:7,  pts:12, pos:14 },
    { team:"Juventus",       p:7,w:3,d:3,l:1,gf:14,ga:10, pts:12, pos:15 },
    { team:"B. Dortmund",    p:7,w:3,d:2,l:2,gf:19,ga:15, pts:11, pos:16 },
    { team:"Galatasaray",    p:7,w:3,d:1,l:3,gf:9, ga:9,  pts:10, pos:17 },
    { team:"Qarabaƒü",        p:7,w:3,d:1,l:3,gf:13,ga:15, pts:10, pos:18 },
    { team:"Marseille",      p:7,w:3,d:0,l:4,gf:11,ga:11, pts:9,  pos:19 },
    { team:"Leverkusen",     p:7,w:2,d:3,l:2,gf:10,ga:14, pts:9,  pos:20 },
    { team:"Monaco",         p:7,w:2,d:3,l:2,gf:8, ga:14, pts:9,  pos:21 },
    { team:"PSV",            p:7,w:2,d:2,l:3,gf:15,ga:14, pts:8,  pos:22 },
    { team:"Athletic Club",  p:7,w:2,d:2,l:3,gf:7, ga:11, pts:8,  pos:23 },
    { team:"Olympiacos",     p:7,w:2,d:2,l:3,gf:8, ga:13, pts:8,  pos:24 },
    { team:"Napoli",         p:7,w:2,d:2,l:3,gf:7, ga:12, pts:8,  pos:25 },
    { team:"Copenhagen",     p:7,w:2,d:2,l:3,gf:11,ga:17, pts:8,  pos:26 },
    { team:"Club Brugge",    p:7,w:2,d:1,l:4,gf:12,ga:17, pts:7,  pos:27 },
    { team:"Bod√∏/Glimt",     p:7,w:1,d:3,l:3,gf:12,ga:14, pts:6,  pos:28 },
    { team:"Benfica",        p:7,w:2,d:0,l:5,gf:6, ga:10, pts:6,  pos:29 },
    { team:"Pafos",          p:7,w:1,d:3,l:3,gf:4, ga:10, pts:6,  pos:30 },
    { team:"Union SG",       p:7,w:2,d:0,l:5,gf:7, ga:17, pts:6,  pos:31 },
    { team:"Ajax",           p:7,w:2,d:0,l:5,gf:7, ga:19, pts:6,  pos:32 },
    { team:"Frankfurt",      p:7,w:1,d:1,l:5,gf:10,ga:19, pts:4,  pos:33 },
    { team:"Slavia Praha",   p:7,w:0,d:3,l:4,gf:4, ga:15, pts:3,  pos:34 },
    { team:"Villarreal",     p:7,w:0,d:1,l:6,gf:5, ga:15, pts:1,  pos:35 },
    { team:"Kairat Almaty",  p:7,w:0,d:1,l:6,gf:5, ga:19, pts:1,  pos:36 }
  ];

  const relevantGames = [
    { id: "ben_rmd", home: "Benfica", away: "Real Madrid" },
    { id: "mon_juv", home: "Monaco", away: "Juventus" },
    { id: "psv_bay", home: "PSV", away: "Bayern M√ºnchen" },
    { id: "ath_spo", home: "Athletic Club", away: "Sporting CP" },
    { id: "aja_oly", home: "Ajax", away: "Olympiacos" },
    { id: "nap_che", home: "Napoli", away: "Chelsea" },
    { id: "bar_cop", home: "Barcelona", away: "Copenhagen" },
    { id: "bru_mar", home: "Club Brugge", away: "Marseille" },
    { id: "atl_bod", home: "Atleti", away: "Bod√∏/Glimt" },
    { id: "usg_ata", home: "Union SG", away: "Atalanta" },
    { id: "paf_sla", home: "Pafos", away: "Slavia Praha" },
    { id: "lev_vil", home: "Leverkusen", away: "Villarreal" }
  ];

  const RIVALS = new Set([
    "Leverkusen","Monaco","PSV","Athletic Club","Olympiacos","Napoli","Copenhagen",
    "Club Brugge","Bod√∏/Glimt","Pafos","Union SG","Ajax","Marseille"
  ]);

  function resetAll(){
    document.querySelectorAll('input[type="number"]').forEach(i => i.value = "0");
    update();
  }

  function setAllZones(open){
    document.getElementById("zone_top8").open = open;
    document.getElementById("zone_playoff").open = open;
    document.getElementById("zone_out").open = open;
  }

  function createGameRow(game){
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td><strong>${game.home}</strong> vs ${game.away}</td>
      <td style="text-align:center;">
        <div style="display:flex; justify-content:center; align-items:center; gap:10px; flex-wrap:wrap;">
          <input type="number" id="${game.id}_home" value="0" min="0" max="9" />
          <span class="sep">‚Äì</span>
          <input type="number" id="${game.id}_away" value="0" min="0" max="9" />
        </div>
      </td>
      <td class="impact" id="${game.id}_status"></td>
    `;
    return tr;
  }

  function ptsFromScore(h,a){
    if (h>a) return [3,0];
    if (h<a) return [0,3];
    return [1,1];
  }

  function getMatchScore(gameId){
    const h = parseInt(document.getElementById(`${gameId}_home`)?.value || "0", 10);
    const a = parseInt(document.getElementById(`${gameId}_away`)?.value || "0", 10);
    return [h,a];
  }

  function getMatchContribution(teamName){
    for (const g of relevantGames){
      const [h,a] = getMatchScore(g.id);
      const [pH, pA] = ptsFromScore(h,a);

      if (g.home === teamName) return { ptsAdd: pH, gfAdd: h, gaAdd: a };
      if (g.away === teamName) return { ptsAdd: pA, gfAdd: a, gaAdd: h };
    }
    return { ptsAdd: 0, gfAdd: 0, gaAdd: 0 };
  }

  function evaluateMatchImpact(game, h, a){
    const homeIsRival = RIVALS.has(game.home);
    const awayIsRival = RIVALS.has(game.away);

    if (game.home === "Benfica") return (h>a) ? "favorable" : "bad";
    if (game.away === "Benfica") return (a>h) ? "favorable" : "bad";

    if (homeIsRival && !awayIsRival){
      if (a>h) return "favorable";
      if (a===h) return "neutral";
      return "bad";
    }
    if (!homeIsRival && awayIsRival){
      if (h>a) return "favorable";
      if (h===a) return "neutral";
      return "bad";
    }

    if (homeIsRival && awayIsRival){
      if (h===a) return "favorable";
      return "neutral";
    }
    return "neutral";
  }

  function computeStandings(){
    const updated = initialStandings.map(s => {
      const c = getMatchContribution(s.team);
      const gf = s.gf + c.gfAdd;
      const ga = s.ga + c.gaAdd;
      return { ...s, gf, ga, gd: gf-ga, pts: s.pts + c.ptsAdd };
    });

    updated.sort((a,b) => {
      if (b.pts !== a.pts) return b.pts - a.pts;
      if (b.gd !== a.gd) return b.gd - a.gd;
      return b.gf - a.gf;
    });

    updated.forEach((t, idx) => t.realPos = idx + 1);
    return updated;
  }

  function zoneClass(pos, team){
    if (team === "Benfica") return "benfica";
    if (pos <= 8) return "zone-top8";
    if (pos <= 24) return "zone-playoff";
    return "zone-out";
  }

  function movementClass(delta){
    if (delta > 0) return "mov-up";
    if (delta < 0) return "mov-down";
    return "mov-same";
  }

  function renderZones(standings){
    const top8 = standings.filter(t => t.realPos <= 8);
    const playoff = standings.filter(t => t.realPos >= 9 && t.realPos <= 24);
    const out = standings.filter(t => t.realPos >= 25);

    const render = (rows, tbodyId) => {
      const tbody = document.getElementById(tbodyId);
      tbody.innerHTML = "";

      rows.forEach(t => {
        const tr = document.createElement("tr");
        tr.className = zoneClass(t.realPos, t.team);

        const delta = t.pos - t.realPos;
        const movTxt = delta === 0 ? "‚Äì" : (delta > 0 ? `‚Üë${delta}` : `‚Üì${Math.abs(delta)}`);

        tr.innerHTML = `
          <td class="pos">${t.realPos}</td>
          <td><strong>${t.team}</strong></td>
          <td class="num">${t.p}</td>
          <td class="num">${t.w}</td>
          <td class="num">${t.d}</td>
          <td class="num">${t.l}</td>
          <td class="num">${t.gf}</td>
          <td class="num">${t.ga}</td>
          <td class="num">${t.gd > 0 ? "+" : ""}${t.gd}</td>
          <td class="pts">${t.pts}</td>
          <td class="num ${movementClass(delta)}">${movTxt}</td>
        `;
        tbody.appendChild(tr);
      });
    };

    render(top8, "tbody_top8");
    render(playoff, "tbody_playoff");
    render(out, "tbody_out");
  }

  function updateBubble({inside, benPos, benPts, benGd, benGf, benGa, benficaWinsMatch}){
    const dot = document.getElementById("bubbleDot");
    const text = document.getElementById("bubbleText");
    const matchBadge = document.getElementById("bubbleMatchBadge");

    dot.classList.toggle("inside", inside);
    dot.classList.toggle("outside", !inside);
    text.textContent = inside ? `Dentro (Playoff) ‚Ä¢ ${benPos}¬∫` : `Fora ‚Ä¢ ${benPos}¬∫`;

    matchBadge.classList.toggle("good", benficaWinsMatch);
    matchBadge.classList.toggle("bad", !benficaWinsMatch);
    matchBadge.textContent = benficaWinsMatch ? "Vence" : "N√£o vence";

    const meta = document.getElementById("bubbleBenficaMeta");
    meta.innerHTML = `
      <span class="chip ${inside ? "good" : "bad"}">Pos: ${benPos}¬∫</span>
      <span class="chip">Pts: ${benPts}</span>
      <span class="chip">SG: ${benGd > 0 ? "+" : ""}${benGd}</span>
      <span class="chip">GM/GS: ${benGf}-${benGa}</span>
    `;
  }

  function update(){
    const [bH, bA] = getMatchScore("ben_rmd");
    const benficaWinsMatch = bH > bA;

    const benficaStatusEl = document.getElementById("benfica_status");
    benficaStatusEl.innerHTML = benficaWinsMatch
      ? `<span class="chip good">‚úÖ Benfica est√° a ganhar</span>`
      : `<span class="chip bad">‚ùå Benfica n√£o est√° a ganhar</span>`;

    let favorable = 0, bad = 0, neutral = 0;
    for (const g of relevantGames){
      const [h,a] = getMatchScore(g.id);
      const impact = evaluateMatchImpact(g,h,a);
      const cell = document.getElementById(`${g.id}_status`);
      if (!cell) continue;

      if (impact === "favorable"){ favorable++; cell.innerHTML = `<span class="good">Favor√°vel ‚úÖ</span>`; }
      else if (impact === "bad"){ bad++; cell.innerHTML = `<span class="bad">Mau ‚ùå</span>`; }
      else { neutral++; cell.innerHTML = `<span class="neutral">Neutro ‚Äì</span>`; }
    }
    document.getElementById("fav_count_info").textContent =
      `Impacto (heur√≠stico): ${favorable} favor√°veis ‚Ä¢ ${bad} maus ‚Ä¢ ${neutral} neutros`;

    const standings = computeStandings();
    renderZones(standings);

    const ben = standings.find(t => t.team === "Benfica");
    const benPos = ben.realPos;
    const inside = benficaWinsMatch && (benPos <= 24);

    document.getElementById("benfica_position_info").textContent =
      `Benfica: ${benPos}¬∫ ‚Ä¢ ${ben.pts} pts ‚Ä¢ SG ${ben.gd > 0 ? "+" : ""}${ben.gd} ‚Ä¢ GM/GS ${ben.gf}-${ben.ga}`;

    updateBubble({
      inside,
      benPos,
      benPts: ben.pts,
      benGd: ben.gd,
      benGf: ben.gf,
      benGa: ben.ga,
      benficaWinsMatch
    });
  }

  // Render jogos relevantes (exclui Benfica porque est√° na bolha)
  const gamesBody = document.getElementById("games-body");
  relevantGames.forEach(g => {
    if (g.id === "ben_rmd") return;
    gamesBody.appendChild(createGameRow(g));
  });

  // Toggle minimizar bolha
  const bubble = document.getElementById("floatingBubble");
  const bubbleToggle = document.getElementById("bubbleToggle");
  bubbleToggle.addEventListener("click", () => {
    bubble.classList.toggle("minimized");
    bubbleToggle.textContent = bubble.classList.contains("minimized") ? "+" : "‚Äì";
  });

  // Listeners
  document.querySelectorAll('input[type="number"]').forEach(inp => {
    inp.addEventListener("input", update);
  });

  update();
</script>
</body>
</html>
